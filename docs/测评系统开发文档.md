# æµ‹è¯„ç³»ç»Ÿå¼€å‘æ–‡æ¡£

## æ–‡æ¡£ä¿¡æ¯
- **ç‰ˆæœ¬**: v1.0
- **æœ€åæ›´æ–°**: 2025-10-14
- **ä½œè€…**: AI Assistant
- **çŠ¶æ€**: ç”Ÿäº§ç¯å¢ƒè¿è¡Œä¸­

---

## ç›®å½•
1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
3. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
4. [APIæ¥å£æ–‡æ¡£](#apiæ¥å£æ–‡æ¡£)
5. [å‰ç«¯å®ç°](#å‰ç«¯å®ç°)
6. [åç«¯å®ç°](#åç«¯å®ç°)
7. [éƒ¨ç½²è¯´æ˜](#éƒ¨ç½²è¯´æ˜)
8. [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
9. [å¼€å‘è§„èŒƒ](#å¼€å‘è§„èŒƒ)
10. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## ç³»ç»Ÿæ¦‚è¿°

### é¡¹ç›®ç®€ä»‹
æµ‹è¯„ç³»ç»Ÿæ˜¯Vietnam Moto & Autoç½‘ç«™çš„æ ¸å¿ƒå†…å®¹æ¨¡å—ï¼Œä¸“é—¨ç”¨äºå‘å¸ƒå’Œå±•ç¤ºæ±½è½¦ã€æ‘©æ‰˜è½¦çš„ä¸“ä¸šæµ‹è¯„æ–‡ç« ã€‚ç³»ç»Ÿæ”¯æŒåˆ†é¡µæµè§ˆã€è¯¦æƒ…æŸ¥çœ‹ã€åˆ†ç±»ç­›é€‰ç­‰åŠŸèƒ½ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- **æµ‹è¯„åˆ—è¡¨å±•ç¤º**: åˆ†é¡µæ˜¾ç¤ºæ‰€æœ‰æµ‹è¯„æ–‡ç« ï¼ˆæ¯é¡µ36æ¡ï¼‰
- **æµ‹è¯„è¯¦æƒ…æŸ¥çœ‹**: å®Œæ•´çš„æ–‡ç« å†…å®¹å±•ç¤ºï¼Œæ”¯æŒå¯Œæ–‡æœ¬æ ¼å¼
- **åˆ†ç±»ç­›é€‰**: æŒ‰ç…§æµ‹è¯„ç±»åˆ«è¿›è¡Œç­›é€‰
- **æœç´¢æ’åº**: æ”¯æŒæŒ‰æœ€æ–°ã€æœ€çƒ­ç­‰æ–¹å¼æ’åº
- **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…PCã€å¹³æ¿ã€æ‰‹æœºç«¯
- **SEOä¼˜åŒ–**: ä½¿ç”¨Astro SSRå®ç°è¯¦æƒ…é¡µSEOä¼˜åŒ–

### ä½¿ç”¨åœºæ™¯
1. **ä¸“ä¸šæµ‹è¯„**: ç¼–è¾‘å›¢é˜Ÿå‘å¸ƒçš„ä¸“ä¸šè½¦è¾†æµ‹è¯„
2. **ç”¨æˆ·è¯„æµ‹**: çœŸå®è½¦ä¸»çš„ä½¿ç”¨ä½“éªŒåˆ†äº«
3. **å¯¹æ¯”è¯„æµ‹**: å¤šæ¬¾è½¦å‹çš„æ¨ªå‘å¯¹æ¯”
4. **é•¿æœŸæµ‹è¯„**: é•¿æœŸä½¿ç”¨åçš„ç»¼åˆè¯„ä»·

---

## æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ
```
Frontend:
- Astro 4.x (SSR + Static)
- React 18.x
- TypeScript 5.x
- CSS Variables (Modern CSS)

Backend:
- Node.js 18.x
- Express.js 4.x
- TypeScript 5.x
- Sequelize ORM 6.x
- SQLite 3.x

Deployment:
- Systemd (æœåŠ¡ç®¡ç†)
- Nginx (åå‘ä»£ç†)
- PM2 (å¤‡ç”¨è¿›ç¨‹ç®¡ç†)
```

### ç³»ç»Ÿæ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç”¨æˆ·æµè§ˆå™¨                            â”‚
â”‚         http://47.237.79.9:4321/reviews/                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Nginxåå‘ä»£ç† (Port 80/443)                 â”‚
â”‚          å‰ç«¯: 4321ç«¯å£  |  åç«¯: 4001ç«¯å£               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                   â”‚
              â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Astro Frontend     â”‚  â”‚   Express.js Backend         â”‚
â”‚   (Hybrid Mode)      â”‚  â”‚   API Server                 â”‚
â”‚                      â”‚  â”‚                              â”‚
â”‚  - SSRè¯¦æƒ…é¡µ         â”‚  â”‚  - RESTful API               â”‚
â”‚  - Staticåˆ—è¡¨é¡µ      â”‚  â”‚  - CORSé…ç½®                  â”‚
â”‚  - Reactç»„ä»¶         â”‚  â”‚  - æ•°æ®éªŒè¯                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  SQLite Database â”‚
                          â”‚  newsè¡¨(å¤ç”¨)     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„
```
è¶Šå—æ‘©æ‰˜æ±½è½¦ç½‘ç«™/
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â””â”€â”€ reviews/
â”‚   â”‚   â”‚       â”œâ”€â”€ index.astro          # æµ‹è¯„åˆ—è¡¨é¡µ
â”‚   â”‚   â”‚       â””â”€â”€ [slug].astro         # æµ‹è¯„è¯¦æƒ…é¡µ
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewsList.tsx          # æµ‹è¯„åˆ—è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ContentCard.tsx          # å†…å®¹å¡ç‰‡ç»„ä»¶(å¤ç”¨)
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.astro             # å¯¼èˆªæ (å«æµ‹è¯„å…¥å£)
â”‚   â”‚   â”‚   â””â”€â”€ Footer.astro             # é¡µè„š(å«æµ‹è¯„é“¾æ¥)
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â””â”€â”€ reviewsApi.ts            # æµ‹è¯„APIæœåŠ¡
â”‚   â””â”€â”€ dist/                            # ç¼–è¯‘è¾“å‡º
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â””â”€â”€ news.ts                  # æµ‹è¯„è·¯ç”±(å¤ç”¨news)
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â””â”€â”€ NewsController.ts        # æµ‹è¯„æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ News.ts                  # æµ‹è¯„æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ index.ts                     # è·¯ç”±æ³¨å†Œ(/api/reviews)
â”‚   â””â”€â”€ dist/                            # ç¼–è¯‘è¾“å‡º
â””â”€â”€ docs/
    â””â”€â”€ æµ‹è¯„ç³»ç»Ÿå¼€å‘æ–‡æ¡£.md               # æœ¬æ–‡æ¡£
```

---

## æ•°æ®åº“è®¾è®¡

### è¡¨ç»“æ„: news (æµ‹è¯„è¡¨)

æµ‹è¯„ç³»ç»Ÿå¤ç”¨äº†newsè¡¨ï¼Œé€šè¿‡`category`å­—æ®µåŒºåˆ†ä¸åŒç±»å‹çš„å†…å®¹ã€‚

```sql
CREATE TABLE news (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,                    -- æµ‹è¯„æ ‡é¢˜
  slug TEXT NOT NULL UNIQUE,              -- URLå‹å¥½æ ‡è¯†
  content TEXT NOT NULL,                  -- æµ‹è¯„æ­£æ–‡(å¯Œæ–‡æœ¬HTML)
  summary TEXT,                           -- æ‘˜è¦
  excerpt TEXT,                           -- ç®€ä»‹
  featured_image TEXT,                    -- ç‰¹è‰²å›¾ç‰‡URL
  category TEXT DEFAULT 'æµ‹è¯„',           -- åˆ†ç±»
  author_name TEXT DEFAULT 'Ban biÃªn táº­p',-- ä½œè€…åç§°
  status TEXT DEFAULT 'published',        -- çŠ¶æ€: published/draft
  is_featured BOOLEAN DEFAULT false,      -- æ˜¯å¦æ¨è
  view_count INTEGER DEFAULT 0,           -- æµè§ˆæ¬¡æ•°
  published_at DATETIME,                  -- å‘å¸ƒæ—¶é—´
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- ç´¢å¼•
CREATE INDEX idx_news_status ON news(status);
CREATE INDEX idx_news_category ON news(category);
CREATE INDEX idx_news_published_at ON news(published_at);
CREATE INDEX idx_news_slug ON news(slug);
CREATE INDEX idx_news_is_featured ON news(is_featured);
```

### å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| id | INTEGER | æ˜¯ | AUTO | ä¸»é”®ID |
| title | TEXT | æ˜¯ | - | æµ‹è¯„æ ‡é¢˜ï¼Œæœ€å¤š200å­—ç¬¦ |
| slug | TEXT | æ˜¯ | - | URLæ ‡è¯†ï¼Œå”¯ä¸€ï¼Œå¦‚"honda-air-blade-160-review" |
| content | TEXT | æ˜¯ | - | æµ‹è¯„æ­£æ–‡ï¼Œæ”¯æŒHTMLå¯Œæ–‡æœ¬ |
| summary | TEXT | å¦ | NULL | æµ‹è¯„æ‘˜è¦ï¼Œ200-300å­—ç¬¦ |
| excerpt | TEXT | å¦ | NULL | ç®€çŸ­ä»‹ç»ï¼Œ100-150å­—ç¬¦ |
| featured_image | TEXT | å¦ | NULL | ç‰¹è‰²å›¾ç‰‡URL |
| category | TEXT | å¦ | 'æµ‹è¯„' | åˆ†ç±»: ä¸“ä¸šæµ‹è¯„/ç”¨æˆ·è¯„æµ‹/å¯¹æ¯”è¯„æµ‹/é•¿æœŸæµ‹è¯„ |
| author_name | TEXT | å¦ | 'Ban biÃªn táº­p' | ä½œè€…åç§° |
| status | TEXT | å¦ | 'published' | çŠ¶æ€: published(å·²å‘å¸ƒ)/draft(è‰ç¨¿) |
| is_featured | BOOLEAN | å¦ | false | æ˜¯å¦æ¨èåˆ°é¦–é¡µ |
| view_count | INTEGER | å¦ | 0 | æµè§ˆæ¬¡æ•°ï¼Œæ¯æ¬¡è®¿é—®+1 |
| published_at | DATETIME | å¦ | NULL | å‘å¸ƒæ—¶é—´ |
| created_at | DATETIME | å¦ | NOW | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME | å¦ | NOW | æ›´æ–°æ—¶é—´ |

### æ•°æ®ç¤ºä¾‹

```json
{
  "id": 57,
  "title": "VinFast Klara sau 1 nÄƒm: Chuyáº¿n phiÃªu lÆ°u cuá»‘i tuáº§n xanh vÃ  nhá»¯ng Ä‘iá»u cáº§n biáº¿t!",
  "slug": "vinfast-klara-sau-1-nam-chuyen-phieu-luu-cuoi-tuan-xanh-va-nhung-dieu-can-biet-57",
  "content": "<p>ChÃ o má»i ngÆ°á»i! MÃ¬nh lÃ  Minh...</p>",
  "summary": "ÄÃ¡nh giÃ¡ VinFast Klara sau 1 nÄƒm sá»­ dá»¥ng thá»±c táº¿...",
  "category": "ÄÃ¡nh giÃ¡ ngÆ°á»i dÃ¹ng",
  "author_name": "BÃ¹i Thá»‹ Linh",
  "status": "published",
  "view_count": 1250,
  "published_at": "2025-10-13T16:24:26.143Z",
  "created_at": "2025-10-13T16:24:26.144Z",
  "updated_at": "2025-10-13T16:24:26.159Z"
}
```

### åˆ†ç±»ä½“ç³»

| åˆ†ç±»åç§° | è¶Šå—è¯­ | è¯´æ˜ |
|---------|--------|------|
| ä¸“ä¸šæµ‹è¯„ | ÄÃ¡nh giÃ¡ chuyÃªn nghiá»‡p | ç¼–è¾‘å›¢é˜Ÿçš„ä¸“ä¸šæµ‹è¯„ |
| ç”¨æˆ·è¯„æµ‹ | ÄÃ¡nh giÃ¡ ngÆ°á»i dÃ¹ng | çœŸå®è½¦ä¸»çš„ä½¿ç”¨ä½“éªŒ |
| å¯¹æ¯”è¯„æµ‹ | So sÃ¡nh xe | å¤šæ¬¾è½¦å‹æ¨ªå‘å¯¹æ¯” |
| é•¿æœŸæµ‹è¯„ | ÄÃ¡nh giÃ¡ dÃ i háº¡n | é•¿æœŸä½¿ç”¨ä½“éªŒæŠ¥å‘Š |

---

## APIæ¥å£æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯

**Base URL**:
- **ç”Ÿäº§ç¯å¢ƒï¼ˆåŸŸå+SSLï¼‰**: `https://vietmoto.top/api` â­ æ¨è
- **å¼€å‘ç¯å¢ƒ**: `http://localhost:4001/api`

**âš ï¸ é‡è¦è¯´æ˜ - ç”Ÿäº§ç¯å¢ƒé…ç½®**:
- å‰ç«¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„ `/api` è°ƒç”¨API
- Nginxè‡ªåŠ¨ä»£ç†ï¼š`https://vietmoto.top/api/*` â†’ `http://127.0.0.1:4001/*`
- æ‰€æœ‰å¤–éƒ¨è®¿é—®éƒ½æ˜¯HTTPSåŠ å¯†
- ä¸è¦ç¡¬ç¼–ç IPåœ°å€æˆ–ä½¿ç”¨`.env.production`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**å“åº”æ ¼å¼**:
```json
{
  "success": true,
  "data": [...],
  "pagination": {
    "total": 100,
    "totalPages": 3,
    "page": 1,
    "limit": 36
  }
}
```

---

### 1. è·å–æµ‹è¯„åˆ—è¡¨

**æ¥å£**: `GET /api/reviews`

**æè¿°**: è·å–æµ‹è¯„æ–‡ç« åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µå’Œç­›é€‰

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| page | number | å¦ | 1 | é¡µç ï¼Œä»1å¼€å§‹ |
| limit | number | å¦ | 36 | æ¯é¡µæ•°é‡ï¼Œæœ€å¤§100 |
| category | string | å¦ | - | åˆ†ç±»ç­›é€‰ |
| sort | string | å¦ | latest | æ’åºæ–¹å¼: latest/popular/featured |
| status | string | å¦ | published | çŠ¶æ€ç­›é€‰ |

**æ’åºé€‰é¡¹**:
- `latest`: æŒ‰å‘å¸ƒæ—¶é—´å€’åºï¼ˆæœ€æ–°ä¼˜å…ˆï¼‰
- `popular`: æŒ‰æµè§ˆé‡å€’åºï¼ˆæœ€çƒ­ä¼˜å…ˆï¼‰
- `featured`: æŒ‰æ¨èä¼˜å…ˆ

**è¯·æ±‚ç¤ºä¾‹**:
```bash
# è·å–ç¬¬1é¡µï¼Œæ¯é¡µ36æ¡
curl --noproxy '*' "http://localhost:4001/api/reviews?page=1&limit=36"

# è·å–ç”¨æˆ·è¯„æµ‹åˆ†ç±»
curl --noproxy '*' "http://localhost:4001/api/reviews?category=ÄÃ¡nh%20giÃ¡%20ngÆ°á»i%20dÃ¹ng"

# è·å–æœ€çƒ­é—¨çš„æµ‹è¯„
curl --noproxy '*' "http://localhost:4001/api/reviews?sort=popular&limit=10"
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": [
    {
      "id": 57,
      "title": "VinFast Klara sau 1 nÄƒm: Chuyáº¿n phiÃªu lÆ°u cuá»‘i tuáº§n xanh",
      "slug": "vinfast-klara-sau-1-nam-57",
      "content": "<p>ChÃ o má»i ngÆ°á»i!...</p>",
      "summary": "ÄÃ¡nh giÃ¡ VinFast Klara sau 1 nÄƒm sá»­ dá»¥ng thá»±c táº¿",
      "excerpt": "ÄÃ¡nh giÃ¡ VinFast Klara...",
      "featured_image": "",
      "category": "ÄÃ¡nh giÃ¡ ngÆ°á»i dÃ¹ng",
      "author_name": "BÃ¹i Thá»‹ Linh",
      "status": "published",
      "is_featured": false,
      "view_count": 1250,
      "published_at": "2025-10-13T16:24:26.143Z",
      "created_at": "2025-10-13T16:24:26.144Z",
      "updated_at": "2025-10-13T16:24:26.159Z"
    }
  ],
  "pagination": {
    "total": 100,
    "totalPages": 3,
    "page": 1,
    "limit": 36
  }
}
```

**é”™è¯¯å“åº”**:
```json
{
  "success": false,
  "error": {
    "code": "INVALID_PARAMS",
    "message": "Invalid page number"
  }
}
```

---

### 2. è·å–æµ‹è¯„è¯¦æƒ…ï¼ˆé€šè¿‡Slugï¼‰

**æ¥å£**: `GET /api/reviews/slug/:slug`

**æè¿°**: é€šè¿‡slugè·å–æµ‹è¯„è¯¦æƒ…ï¼ŒåŒæ—¶æµè§ˆé‡+1

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| slug | string | æ˜¯ | æµ‹è¯„çš„URLæ ‡è¯† |

**è¯·æ±‚ç¤ºä¾‹**:
```bash
curl --noproxy '*' "http://localhost:4001/api/reviews/slug/vinfast-klara-sau-1-nam-57"
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "id": 57,
    "title": "VinFast Klara sau 1 nÄƒm: Chuyáº¿n phiÃªu lÆ°u cuá»‘i tuáº§n xanh",
    "slug": "vinfast-klara-sau-1-nam-57",
    "content": "<p>ChÃ o má»i ngÆ°á»i! MÃ¬nh lÃ  Minh, má»™t ngÆ°á»i dÃ¹ng xe mÃ¡y...</p>",
    "summary": "ÄÃ¡nh giÃ¡ VinFast Klara sau 1 nÄƒm sá»­ dá»¥ng thá»±c táº¿",
    "category": "ÄÃ¡nh giÃ¡ ngÆ°á»i dÃ¹ng",
    "author_name": "BÃ¹i Thá»‹ Linh",
    "view_count": 1251,
    "published_at": "2025-10-13T16:24:26.143Z",
    "created_at": "2025-10-13T16:24:26.144Z",
    "updated_at": "2025-10-13T16:24:26.159Z"
  }
}
```

**é”™è¯¯å“åº”**:
```json
{
  "success": false,
  "error": {
    "code": "NOT_FOUND",
    "message": "Review not found"
  }
}
```

---

### 3. è·å–æµ‹è¯„è¯¦æƒ…ï¼ˆé€šè¿‡IDï¼‰

**æ¥å£**: `GET /api/reviews/:id`

**æè¿°**: é€šè¿‡IDè·å–æµ‹è¯„è¯¦æƒ…

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| id | number | æ˜¯ | æµ‹è¯„ID |

**è¯·æ±‚ç¤ºä¾‹**:
```bash
curl --noproxy '*' "http://localhost:4001/api/reviews/57"
```

**å“åº”æ ¼å¼**: åŒä¸Š

---

### 4. è·å–æœ€æ–°æµ‹è¯„

**æ¥å£**: `GET /api/reviews/latest`

**æè¿°**: è·å–æœ€æ–°å‘å¸ƒçš„æµ‹è¯„æ–‡ç« 

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| limit | number | å¦ | 6 | è¿”å›æ•°é‡ |

**è¯·æ±‚ç¤ºä¾‹**:
```bash
curl --noproxy '*' "http://localhost:4001/api/reviews/latest?limit=10"
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": [
    {
      "id": 57,
      "title": "VinFast Klara sau 1 nÄƒm",
      "slug": "vinfast-klara-sau-1-nam-57",
      "summary": "ÄÃ¡nh giÃ¡ VinFast Klara...",
      "published_at": "2025-10-13T16:24:26.143Z"
    }
  ]
}
```

---

### 5. è·å–ç›¸å…³æµ‹è¯„

**æ¥å£**: `GET /api/reviews/slug/:slug/related`

**æè¿°**: è·å–ä¸æŒ‡å®šæµ‹è¯„ç›¸å…³çš„å…¶ä»–æµ‹è¯„ï¼ˆåŸºäºåˆ†ç±»ï¼‰

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| slug | string | æ˜¯ | æµ‹è¯„slug |

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| limit | number | å¦ | 6 | è¿”å›æ•°é‡ |
| category | string | å¦ | - | æŒ‡å®šåˆ†ç±» |

**è¯·æ±‚ç¤ºä¾‹**:
```bash
curl --noproxy '*' "http://localhost:4001/api/reviews/slug/vinfast-klara-sau-1-nam-57/related?limit=5"
```

**å“åº”æ ¼å¼**: åŒè·å–åˆ—è¡¨

---

### 6. è·å–æ‰€æœ‰åˆ†ç±»

**æ¥å£**: `GET /api/reviews/categories`

**æè¿°**: è·å–æ‰€æœ‰æµ‹è¯„åˆ†ç±»åŠæ•°é‡ç»Ÿè®¡

**è¯·æ±‚ç¤ºä¾‹**:
```bash
curl --noproxy '*' "http://localhost:4001/api/reviews/categories"
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": [
    {
      "category": "ÄÃ¡nh giÃ¡ ngÆ°á»i dÃ¹ng",
      "count": 45
    },
    {
      "category": "ÄÃ¡nh giÃ¡ chuyÃªn nghiá»‡p",
      "count": 32
    },
    {
      "category": "So sÃ¡nh xe",
      "count": 18
    },
    {
      "category": "ÄÃ¡nh giÃ¡ dÃ i háº¡n",
      "count": 5
    }
  ]
}
```

---

### 7. åˆ›å»ºæµ‹è¯„ï¼ˆç®¡ç†å‘˜ï¼‰

**æ¥å£**: `POST /api/reviews`

**æè¿°**: åˆ›å»ºæ–°çš„æµ‹è¯„æ–‡ç« 

**è¯·æ±‚ä½“**:
```json
{
  "title": "Honda Winner X 2024: ÄÃ¡nh giÃ¡ toÃ n diá»‡n",
  "slug": "honda-winner-x-2024-danh-gia-toan-dien",
  "content": "<p>Ná»™i dung Ä‘Ã¡nh giÃ¡...</p>",
  "summary": "ÄÃ¡nh giÃ¡ toÃ n diá»‡n Honda Winner X 2024",
  "category": "ÄÃ¡nh giÃ¡ chuyÃªn nghiá»‡p",
  "author_name": "Nguyá»…n VÄƒn A",
  "featured_image": "https://example.com/image.jpg",
  "is_featured": false
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "id": 101,
    "title": "Honda Winner X 2024: ÄÃ¡nh giÃ¡ toÃ n diá»‡n",
    "slug": "honda-winner-x-2024-danh-gia-toan-dien",
    "created_at": "2025-10-14T00:00:00.000Z"
  }
}
```

---

### 8. æ›´æ–°æµ‹è¯„ï¼ˆç®¡ç†å‘˜ï¼‰

**æ¥å£**: `PUT /api/reviews/:id`

**æè¿°**: æ›´æ–°å·²æœ‰çš„æµ‹è¯„æ–‡ç« 

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| id | number | æ˜¯ | æµ‹è¯„ID |

**è¯·æ±‚ä½“**: åŒåˆ›å»ºæ¥å£ï¼ˆå¯éƒ¨åˆ†æ›´æ–°ï¼‰

---

### 9. åˆ é™¤æµ‹è¯„ï¼ˆç®¡ç†å‘˜ï¼‰

**æ¥å£**: `DELETE /api/reviews/:id`

**æè¿°**: åˆ é™¤æµ‹è¯„æ–‡ç« 

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| id | number | æ˜¯ | æµ‹è¯„ID |

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "Review deleted successfully"
}
```

---

### 10. n8n Webhookæ¥å£

**æ¥å£**: `POST /api/reviews/webhook`

**æè¿°**: n8nå·¥ä½œæµè‡ªåŠ¨åˆ›å»ºæµ‹è¯„çš„webhookæ¥å£

**è¯·æ±‚ä½“**: åŒåˆ›å»ºæ¥å£

**ç”¨é€”**: 
- è‡ªåŠ¨åŒ–å†…å®¹ç”Ÿæˆ
- ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆ
- å®šæ—¶å‘å¸ƒä»»åŠ¡

---

## å‰ç«¯å®ç°

### é¡µé¢ç»“æ„

#### 1. æµ‹è¯„åˆ—è¡¨é¡µ (`/reviews/index.astro`)

**åŠŸèƒ½ç‰¹æ€§**:
- åˆ†é¡µå±•ç¤ºæ‰€æœ‰æµ‹è¯„ï¼ˆæ¯é¡µ36æ¡ï¼‰
- å“åº”å¼ç½‘æ ¼å¸ƒå±€ï¼ˆPC: 3åˆ—ï¼Œå¹³æ¿: 2åˆ—ï¼Œæ‰‹æœº: 1åˆ—ï¼‰
- åˆ†ç±»ç­›é€‰
- æœç´¢æ’åº
- æ¯›ç»ç’ƒå¡ç‰‡è®¾è®¡

**æ ¸å¿ƒä»£ç **:
```astro
---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ReviewsList from '../../components/ReviewsList';
import '../../components/ContentCard.css';
import '../../components/SectionStyles.css';
---

<BaseLayout 
  title="ÄÃ¡nh GiÃ¡ Xe - Vietnam Moto & Auto"
  description="ÄÃ¡nh giÃ¡ chuyÃªn sÃ¢u vá» xe mÃ¡y vÃ  Ã´ tÃ´, tráº£i nghiá»‡m thá»±c táº¿ vÃ  phÃ¢n tÃ­ch chi tiáº¿t"
>
  <!-- Page Header -->
  <section style="padding: var(--spacing-xl) 0 var(--spacing-lg) 0;">
    <div class="container-fluid">
      <div style="text-align: center; max-width: 800px; margin: 0 auto;">
        <h1 class="heading-section" style="margin-bottom: var(--spacing-md); color: var(--text-primary);">
          ÄÃ¡nh GiÃ¡ Xe
        </h1>
        <p class="text-body-large" style="color: var(--text-secondary);">
          ÄÃ¡nh giÃ¡ chuyÃªn sÃ¢u vá» xe mÃ¡y vÃ  Ã´ tÃ´, tráº£i nghiá»‡m thá»±c táº¿ vÃ  phÃ¢n tÃ­ch chi tiáº¿t tá»« Ä‘á»™i ngÅ© chuyÃªn gia
        </p>
      </div>
    </div>
  </section>

  <!-- Reviews Grid -->
  <section style="padding: 0 0 var(--spacing-4xl) 0;">
    <div class="container-fluid">
      <ReviewsList client:load />
    </div>
  </section>
</BaseLayout>
```

**SEOä¼˜åŒ–**:
- è¯­ä¹‰åŒ–HTMLæ ‡ç­¾
- ç»“æ„åŒ–æ ‡é¢˜å±‚çº§
- Metaæè¿°ä¼˜åŒ–
- å“åº”å¼å›¾ç‰‡åŠ è½½

---

#### 2. æµ‹è¯„è¯¦æƒ…é¡µ (`/reviews/[slug].astro`)

**åŠŸèƒ½ç‰¹æ€§**:
- SSRåŠ¨æ€è·¯ç”±
- å¯Œæ–‡æœ¬å†…å®¹å±•ç¤º
- é¢åŒ…å±‘å¯¼èˆª
- ç›¸å…³æµ‹è¯„æ¨è
- åˆ†äº«åŠŸèƒ½
- æµè§ˆé‡ç»Ÿè®¡

**æ ¸å¿ƒä»£ç **:
```astro
---
import BaseLayout from '../../layouts/BaseLayout.astro';

// ç”Ÿæˆé™æ€è·¯å¾„ - ä»APIè·å–æ‰€æœ‰æµ‹è¯„slug
export async function getStaticPaths() {
  try {
    const API_BASE_URL = 'http://localhost:4001/api';
    const response = await fetch(`${API_BASE_URL}/reviews?limit=200`);
    const result = await response.json();
    
    if (result.success && result.data) {
      return result.data.map((review: any) => ({
        params: { slug: review.slug }
      }));
    }
  } catch (error) {
    console.error('è·å–æµ‹è¯„è·¯å¾„å¤±è´¥:', error);
  }
  
  return [];
}

const { slug } = Astro.params;
---

<BaseLayout>
  <article class="article-container">
    <!-- é¢åŒ…å±‘å¯¼èˆª -->
    <nav class="breadcrumb">
      <a href="/">Trang chá»§</a> / 
      <a href="/reviews">ÄÃ¡nh giÃ¡</a> / 
      <span>Ná»™i dung</span>
    </nav>

    <!-- åŠ¨æ€åŠ è½½å†…å®¹ -->
    <div id="article-content"></div>
  </article>
</BaseLayout>

<script define:vars={{ slug }}>
  async function loadReviewDetail() {
    const API_BASE_URL = 'http://47.237.79.9:4001/api';
    const response = await fetch(`${API_BASE_URL}/reviews/slug/${slug}`);
    const result = await response.json();
    
    if (result.success && result.data) {
      const review = result.data;
      document.title = `${review.title} - Vietnam Moto & Auto`;
      document.getElementById('article-content').innerHTML = review.content;
    }
  }
  
  loadReviewDetail();
</script>
```

---

### ç»„ä»¶å®ç°

#### ReviewsList.tsx - æµ‹è¯„åˆ—è¡¨ç»„ä»¶

**å®Œæ•´ä»£ç **:
```typescript
import React, { useState, useEffect } from 'react';
import ContentCard from './ContentCard';
import { getReviewsList, type ReviewItem } from '../services/reviewsApi';

const ReviewsList: React.FC = () => {
  const [reviewItems, setReviewItems] = useState<any[]>([]);
  const [loading, setLoading] = useState(true);
  const [currentPage, setCurrentPage] = useState(1);
  const [totalPages, setTotalPages] = useState(1);
  const [totalItems, setTotalItems] = useState(0);
  const itemsPerPage = 36; // æ¯é¡µæ˜¾ç¤º36ä¸ª

  const fetchReviews = async (page: number = 1) => {
    try {
      setLoading(true);
      const response = await getReviewsList({ 
        page, 
        limit: itemsPerPage, 
        sort: 'latest' 
      });
      
      if (response.success && response.data) {
        const formattedReviews = response.data.map((item: ReviewItem) => ({
          id: item.id.toString(),
          slug: item.slug,
          title: item.title,
          description: item.summary || item.excerpt || item.content.substring(0, 200),
          category: item.category || 'ÄÃ¡nh giÃ¡',
          date: new Date(item.published_at || item.created_at).toLocaleDateString('vi-VN'),
          views: item.view_count > 1000 ? 
            `${(item.view_count / 1000).toFixed(1)}K` : 
            item.view_count.toString(),
          author: item.author_name || 'Ban biÃªn táº­p'
        }));
        
        setReviewItems(formattedReviews);
        
        if (response.pagination) {
          setTotalPages(response.pagination.totalPages);
          setTotalItems(response.pagination.total);
        }
      }
    } catch (error) {
      console.error('è·å–æµ‹è¯„å¤±è´¥:', error);
      setReviewItems([]);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchReviews(currentPage);
  }, [currentPage]);

  const handlePageChange = (page: number) => {
    if (page >= 1 && page <= totalPages) {
      setCurrentPage(page);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  };

  const renderPagination = () => {
    if (totalPages <= 1) return null;

    const pages = [];
    const maxVisiblePages = 5;
    let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
    let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

    if (endPage - startPage + 1 < maxVisiblePages) {
      startPage = Math.max(1, endPage - maxVisiblePages + 1);
    }

    // ä¸Šä¸€é¡µ
    pages.push(
      <button
        key="prev"
        onClick={() => handlePageChange(currentPage - 1)}
        disabled={currentPage === 1}
        className="pagination-btn"
      >
        â† TrÆ°á»›c
      </button>
    );

    // é¡µç 
    for (let i = startPage; i <= endPage; i++) {
      pages.push(
        <button
          key={i}
          onClick={() => handlePageChange(i)}
          className={`pagination-btn ${i === currentPage ? 'active' : ''}`}
        >
          {i}
        </button>
      );
    }

    // ä¸‹ä¸€é¡µ
    pages.push(
      <button
        key="next"
        onClick={() => handlePageChange(currentPage + 1)}
        disabled={currentPage === totalPages}
        className="pagination-btn"
      >
        Sau â†’
      </button>
    );

    return pages;
  };

  if (loading) {
    return (
      <div style={{ textAlign: 'center', padding: 'var(--spacing-3xl)' }}>
        <p>Äang táº£i Ä‘Ã¡nh giÃ¡...</p>
      </div>
    );
  }

  const reviewIcon = (
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
      <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
    </svg>
  );

  return (
    <div>
      {/* æµ‹è¯„ç½‘æ ¼ */}
      <div className="grid-auto-fit">
        {reviewItems.map((item) => (
          <ContentCard
            key={item.id}
            title={item.title}
            description={item.description}
            category={item.category}
            icon={reviewIcon}
            meta={[
              { label: 'NgÃ y', value: item.date },
              { label: 'LÆ°á»£t xem', value: item.views },
              { label: 'TÃ¡c giáº£', value: item.author }
            ]}
            link={`/reviews/${item.slug}`}
          />
        ))}
      </div>

      {/* åˆ†é¡µç»„ä»¶ */}
      {totalPages > 1 && (
        <div className="pagination-container">
          {renderPagination()}
        </div>
      )}
    </div>
  );
};

export default ReviewsList;
```

**ç»„ä»¶ç‰¹ç‚¹**:
- âœ… çŠ¶æ€ç®¡ç†ï¼ˆReact Hooksï¼‰
- âœ… åˆ†é¡µé€»è¾‘
- âœ… åŠ è½½çŠ¶æ€
- âœ… é”™è¯¯å¤„ç†
- âœ… å“åº”å¼è®¾è®¡
- âœ… æ— éšœç¢è®¿é—®

---

### APIæœåŠ¡å±‚

#### reviewsApi.ts - æµ‹è¯„APIå°è£…

**å®Œæ•´ä»£ç **:
```typescript
// æµ‹è¯„APIæœåŠ¡

// âš ï¸ ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆåŸŸå+SSLï¼‰
// âœ… æ­£ç¡®ï¼šå®¢æˆ·ç«¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œè‡ªåŠ¨é€šè¿‡Nginxä»£ç†ä¸ºHTTPS
const API_BASE_URL = '/api';  // ç”Ÿäº§ç¯å¢ƒ

// å¼€å‘ç¯å¢ƒé…ç½®ï¼ˆæ³¨é‡Šæ‰ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼Œå¯ç”¨ä¸‹é¢çš„ä»£ç ï¼‰
// const API_BASE_URL = typeof window !== 'undefined'
//   ? 'http://localhost:4001/api'  // æµè§ˆå™¨ç¯å¢ƒ
//   : 'http://localhost:4001/api';  // æœåŠ¡å™¨ç«¯æ¸²æŸ“

export interface ReviewItem {
  id: number;
  title: string;
  slug: string;
  content: string;
  summary?: string;
  excerpt?: string;
  category?: string;
  author_name?: string;
  view_count: number;
  created_at: string;
  updated_at: string;
  published_at?: string;
}

export interface ReviewListResponse {
  success: boolean;
  data: ReviewItem[];
  pagination?: {
    total: number;
    totalPages: number;
    page: number;
    limit: number;
  };
}

// è·å–æµ‹è¯„åˆ—è¡¨
export async function getReviewsList(params?: {
  page?: number;
  limit?: number;
  category?: string;
  sort?: string;
}): Promise<ReviewListResponse> {
  const queryParams = new URLSearchParams();
  if (params?.page) queryParams.append('page', params.page.toString());
  if (params?.limit) queryParams.append('limit', params.limit.toString());
  if (params?.category) queryParams.append('category', params.category);
  if (params?.sort) queryParams.append('sort', params.sort);

  const url = `${API_BASE_URL}/reviews?${queryParams.toString()}`;
  const response = await fetch(url);
  
  if (!response.ok) {
    throw new Error(`Failed to fetch reviews: ${response.statusText}`);
  }

  return response.json();
}

// è·å–æµ‹è¯„è¯¦æƒ…ï¼ˆé€šè¿‡slugï¼‰
export async function getReviewBySlug(slug: string) {
  const url = `${API_BASE_URL}/reviews/slug/${slug}`;
  const response = await fetch(url);
  
  if (!response.ok) {
    throw new Error(`Failed to fetch review: ${response.statusText}`);
  }

  return response.json();
}

export default {
  getReviewsList,
  getReviewBySlug,
};
```

**è®¾è®¡ç‰¹ç‚¹**:
- âœ… TypeScriptç±»å‹å®šä¹‰
- âœ… ç¯å¢ƒè‡ªé€‚åº”ï¼ˆBrowser/SSRï¼‰
- âœ… é”™è¯¯å¤„ç†
- âœ… å‚æ•°éªŒè¯
- âœ… å“åº”æ ¼å¼æ ‡å‡†åŒ–

---

### æ ·å¼è®¾è®¡

#### CSSå˜é‡ç³»ç»Ÿ

```css
:root {
  /* é¢œè‰²ç³»ç»Ÿ */
  --text-primary: #e4e4e7;
  --text-secondary: #a1a1aa;
  --text-muted: #71717a;
  
  --glass-bg: rgba(24, 24, 27, 0.6);
  --glass-border: rgba(255, 255, 255, 0.08);
  
  --accent-primary: #667eea;
  --accent-secondary: #764ba2;
  --accent-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  
  /* é—´è·ç³»ç»Ÿ */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  --spacing-2xl: 3rem;
  --spacing-3xl: 4rem;
  --spacing-4xl: 6rem;
  
  /* åœ†è§’ç³»ç»Ÿ */
  --radius-sm: 0.25rem;
  --radius-md: 0.5rem;
  --radius-lg: 1rem;
  --radius-xl: 1.5rem;
}
```

#### æ¯›ç»ç’ƒå¡ç‰‡æ ·å¼

```css
.card-glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-xl);
  padding: var(--spacing-xl);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.card-glass:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  border-color: rgba(102, 126, 234, 0.3);
}
```

#### åˆ†é¡µæ ·å¼

```css
.pagination-container {
  margin-top: var(--spacing-3xl);
  text-align: center;
  padding: var(--spacing-lg);
  background: var(--glass-bg);
  border-radius: var(--radius-lg);
  border: 1px solid var(--glass-border);
}

.pagination-btn {
  padding: var(--spacing-sm) var(--spacing-md);
  margin: 0 var(--spacing-xs);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-md);
  background: var(--glass-bg);
  color: var(--text-primary);
  cursor: pointer;
  transition: all 0.3s ease;
}

.pagination-btn:hover:not(:disabled) {
  background: var(--accent-primary);
  color: white;
  transform: translateY(-2px);
}

.pagination-btn.active {
  background: var(--accent-primary);
  color: white;
  font-weight: 600;
}

.pagination-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
```

---

## åç«¯å®ç°

### è·¯ç”±é…ç½®

#### index.ts - è·¯ç”±æ³¨å†Œ

```typescript
import express from 'express';
import newsRoutes from './routes/news';

const app = express();

// APIè·¯ç”±
app.use('/api/reviews', newsRoutes); // æµ‹è¯„æ¨¡å—ï¼ˆå¤ç”¨newsè·¯ç”±ï¼‰
```

#### news.ts - æµ‹è¯„è·¯ç”±

```typescript
import { Router } from 'express';
import { asyncHandler } from '../middleware/errorHandler';
import NewsController from '../controllers/NewsController';

const router = Router();

// è·å–æµ‹è¯„åˆ—è¡¨
router.get('/', asyncHandler(NewsController.getList));

// è·å–æœ€æ–°æµ‹è¯„
router.get('/latest', asyncHandler(NewsController.getLatest));

// è·å–æ‰€æœ‰åˆ†ç±»
router.get('/categories', asyncHandler(NewsController.getCategories));

// è·å–æµ‹è¯„è¯¦æƒ…ï¼ˆé€šè¿‡slugï¼‰
router.get('/slug/:slug', asyncHandler(NewsController.getBySlug));

// è·å–ç›¸å…³æµ‹è¯„
router.get('/slug/:slug/related', asyncHandler(NewsController.getRelated));

// è·å–æµ‹è¯„è¯¦æƒ…ï¼ˆé€šè¿‡IDï¼‰
router.get('/:id', asyncHandler(NewsController.getById));

// åˆ›å»ºæµ‹è¯„ï¼ˆç®¡ç†å‘˜ï¼‰
router.post('/', asyncHandler(NewsController.create));

// æ›´æ–°æµ‹è¯„ï¼ˆç®¡ç†å‘˜ï¼‰
router.put('/:id', asyncHandler(NewsController.update));

// åˆ é™¤æµ‹è¯„ï¼ˆç®¡ç†å‘˜ï¼‰
router.delete('/:id', asyncHandler(NewsController.delete));

// n8n Webhook
router.post('/webhook', asyncHandler(NewsController.create));

export default router;
```

---

### æ§åˆ¶å™¨å®ç°

#### NewsController.ts - æµ‹è¯„æ§åˆ¶å™¨

**æ ¸å¿ƒæ–¹æ³•**:

```typescript
class NewsController {
  // è·å–æµ‹è¯„åˆ—è¡¨
  async getList(req: Request, res: Response) {
    const { 
      page = 1, 
      limit = 36, 
      category, 
      sort = 'latest',
      status = 'published' 
    } = req.query;

    const offset = (Number(page) - 1) * Number(limit);

    // æ„å»ºæŸ¥è¯¢æ¡ä»¶
    const where: any = { status };
    if (category) where.category = category;

    // æ’åºé€»è¾‘
    let order: any[] = [];
    switch (sort) {
      case 'popular':
        order = [['view_count', 'DESC']];
        break;
      case 'featured':
        order = [['is_featured', 'DESC'], ['published_at', 'DESC']];
        break;
      case 'latest':
      default:
        order = [['published_at', 'DESC']];
    }

    // æŸ¥è¯¢æ•°æ®
    const { count, rows } = await News.findAndCountAll({
      where,
      order,
      limit: Number(limit),
      offset,
    });

    res.json({
      success: true,
      data: rows,
      pagination: {
        total: count,
        totalPages: Math.ceil(count / Number(limit)),
        page: Number(page),
        limit: Number(limit),
      },
    });
  }

  // è·å–æµ‹è¯„è¯¦æƒ…ï¼ˆé€šè¿‡slugï¼‰
  async getBySlug(req: Request, res: Response) {
    const { slug } = req.params;

    const review = await News.findOne({
      where: { slug, status: 'published' },
    });

    if (!review) {
      return res.status(404).json({
        success: false,
        error: {
          code: 'NOT_FOUND',
          message: 'Review not found',
        },
      });
    }

    // å¢åŠ æµè§ˆé‡
    await review.increment('view_count');

    res.json({
      success: true,
      data: review,
    });
  }

  // åˆ›å»ºæµ‹è¯„
  async create(req: Request, res: Response) {
    const reviewData = req.body;

    // æ•°æ®éªŒè¯
    if (!reviewData.title || !reviewData.content) {
      return res.status(400).json({
        success: false,
        error: {
          code: 'INVALID_DATA',
          message: 'Title and content are required',
        },
      });
    }

    // ç”Ÿæˆslugï¼ˆå¦‚æœæœªæä¾›ï¼‰
    if (!reviewData.slug) {
      reviewData.slug = generateSlug(reviewData.title);
    }

    // åˆ›å»ºè®°å½•
    const review = await News.create(reviewData);

    res.status(201).json({
      success: true,
      data: review,
    });
  }
}

export default new NewsController();
```

---

### æ•°æ®æ¨¡å‹

#### News.ts - æµ‹è¯„æ¨¡å‹

```typescript
import { DataTypes, Model } from 'sequelize';
import { dbConfig } from '../config/database';

export interface NewsAttributes {
  id: number;
  title: string;
  slug: string;
  content: string;
  summary?: string;
  excerpt?: string;
  featured_image?: string;
  category?: string;
  author_name?: string;
  status: string;
  is_featured: boolean;
  view_count: number;
  published_at?: Date;
  created_at: Date;
  updated_at: Date;
}

class News extends Model<NewsAttributes> implements NewsAttributes {
  public id!: number;
  public title!: string;
  public slug!: string;
  public content!: string;
  public summary?: string;
  public excerpt?: string;
  public featured_image?: string;
  public category?: string;
  public author_name?: string;
  public status!: string;
  public is_featured!: boolean;
  public view_count!: number;
  public published_at?: Date;
  public created_at!: Date;
  public updated_at!: Date;
}

News.init(
  {
    id: {
      type: DataTypes.INTEGER,
      autoIncrement: true,
      primaryKey: true,
    },
    title: {
      type: DataTypes.TEXT,
      allowNull: false,
      validate: { notEmpty: true },
    },
    slug: {
      type: DataTypes.TEXT,
      allowNull: false,
      unique: true,
    },
    content: {
      type: DataTypes.TEXT,
      allowNull: false,
    },
    // ... å…¶ä»–å­—æ®µ
  },
  {
    sequelize: dbConfig,
    tableName: 'news',
    timestamps: true,
    underscored: false,
    createdAt: 'created_at',
    updatedAt: 'updated_at',
  }
);

export default News;
```

---

## éƒ¨ç½²è¯´æ˜

### ç³»ç»ŸæœåŠ¡é…ç½®

#### å‰ç«¯æœåŠ¡

**æ–‡ä»¶**: `/etc/systemd/system/vietnam-moto-frontend.service`

```ini
[Unit]
Description=Vietnam Moto Auto Frontend Service
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/var/www/vietnam-moto-auto/frontend
ExecStart=/usr/bin/node dist/server/entry.mjs
Restart=always
RestartSec=10
Environment="NODE_ENV=production"
Environment="HOST=0.0.0.0"
Environment="PORT=4321"

[Install]
WantedBy=multi-user.target
```

#### åç«¯æœåŠ¡

**æ–‡ä»¶**: `/etc/systemd/system/vietnam-moto-backend.service`

```ini
[Unit]
Description=Vietnam Moto Auto Backend Service
After=network.target
Documentation=https://github.com/vietnam-moto-auto

[Service]
Type=simple
User=root
WorkingDirectory=/var/www/vietnam-moto-auto/backend
ExecStart=/usr/bin/node dist/index.js
Restart=always
RestartSec=10
Environment="NODE_ENV=production"
Environment="PORT=4001"
Environment="http_proxy="
Environment="https_proxy="
Environment="HTTP_PROXY="
Environment="HTTPS_PROXY="

[Install]
WantedBy=multi-user.target
```

---

### éƒ¨ç½²æµç¨‹

#### 1. ç¼–è¯‘å‰ç«¯

```bash
cd /root/è¶Šå—æ‘©æ‰˜æ±½è½¦ç½‘ç«™/frontend
npm run build
```

**è¾“å‡ºç›®å½•**: `dist/`
- `dist/client/` - å®¢æˆ·ç«¯èµ„æº
- `dist/server/` - SSRæœåŠ¡å™¨

#### 2. ç¼–è¯‘åç«¯

```bash
cd /root/è¶Šå—æ‘©æ‰˜æ±½è½¦ç½‘ç«™/backend
npm run build
```

**è¾“å‡ºç›®å½•**: `dist/`

#### 3. éƒ¨ç½²å‰ç«¯

```bash
# å¤‡ä»½æ—§ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰
cp -r /var/www/vietnam-moto-auto/frontend/dist /var/www/vietnam-moto-auto/frontend/dist.backup

# åˆ é™¤æ—§æ–‡ä»¶
rm -rf /var/www/vietnam-moto-auto/frontend/dist

# å¤åˆ¶æ–°æ–‡ä»¶
cp -r /root/è¶Šå—æ‘©æ‰˜æ±½è½¦ç½‘ç«™/frontend/dist /var/www/vietnam-moto-auto/frontend/

# é‡å¯æœåŠ¡
systemctl restart vietnam-moto-frontend
```

#### 4. éƒ¨ç½²åç«¯

```bash
# å¤‡ä»½æ—§ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰
cp -r /var/www/vietnam-moto-auto/backend/dist /var/www/vietnam-moto-auto/backend/dist.backup

# åˆ é™¤æ—§æ–‡ä»¶
rm -rf /var/www/vietnam-moto-auto/backend/dist

# å¤åˆ¶æ–°æ–‡ä»¶
cp -r /root/è¶Šå—æ‘©æ‰˜æ±½è½¦ç½‘ç«™/backend/dist /var/www/vietnam-moto-auto/backend/

# é‡å¯æœåŠ¡
systemctl restart vietnam-moto-backend
```

#### 5. æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹å‰ç«¯æœåŠ¡
systemctl status vietnam-moto-frontend

# æŸ¥çœ‹åç«¯æœåŠ¡
systemctl status vietnam-moto-backend

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
journalctl -u vietnam-moto-backend -f
journalctl -u vietnam-moto-frontend -f
```

#### 6. æµ‹è¯•éƒ¨ç½²

```bash
# æµ‹è¯•å‰ç«¯
curl http://localhost:4321/reviews/

# æµ‹è¯•åç«¯API
curl --noproxy '*' "http://localhost:4001/api/reviews?limit=5"

# æµ‹è¯•å…¬ç½‘è®¿é—®
curl http://47.237.79.9:4321/reviews/
```

---

### å¿«é€Ÿéƒ¨ç½²è„šæœ¬

**æ–‡ä»¶**: `/root/deploy-reviews.sh`

```bash
#!/bin/bash

set -e

echo "ğŸš€ å¼€å§‹éƒ¨ç½²æµ‹è¯„ç³»ç»Ÿ..."

# 1. ç¼–è¯‘å‰ç«¯
echo "ğŸ“¦ ç¼–è¯‘å‰ç«¯..."
cd /root/è¶Šå—æ‘©æ‰˜æ±½è½¦ç½‘ç«™/frontend
npm run build

# 2. ç¼–è¯‘åç«¯
echo "ğŸ“¦ ç¼–è¯‘åç«¯..."
cd /root/è¶Šå—æ‘©æ‰˜æ±½è½¦ç½‘ç«™/backend
npm run build

# 3. éƒ¨ç½²å‰ç«¯
echo "ğŸ”„ éƒ¨ç½²å‰ç«¯..."
rm -rf /var/www/vietnam-moto-auto/frontend/dist
cp -r /root/è¶Šå—æ‘©æ‰˜æ±½è½¦ç½‘ç«™/frontend/dist /var/www/vietnam-moto-auto/frontend/

# 4. éƒ¨ç½²åç«¯
echo "ğŸ”„ éƒ¨ç½²åç«¯..."
rm -rf /var/www/vietnam-moto-auto/backend/dist
cp -r /root/è¶Šå—æ‘©æ‰˜æ±½è½¦ç½‘ç«™/backend/dist /var/www/vietnam-moto-auto/backend/

# 5. é‡å¯æœåŠ¡
echo "â™»ï¸  é‡å¯æœåŠ¡..."
systemctl restart vietnam-moto-frontend
systemctl restart vietnam-moto-backend

# 6. ç­‰å¾…æœåŠ¡å¯åŠ¨
echo "â³ ç­‰å¾…æœåŠ¡å¯åŠ¨..."
sleep 3

# 7. æ£€æŸ¥æœåŠ¡çŠ¶æ€
echo "âœ… æ£€æŸ¥æœåŠ¡çŠ¶æ€..."
systemctl status vietnam-moto-frontend --no-pager | head -10
systemctl status vietnam-moto-backend --no-pager | head -10

# 8. æµ‹è¯•API
echo "ğŸ§ª æµ‹è¯•API..."
curl --noproxy '*' -s "http://localhost:4001/api/reviews?limit=1" | head -20

echo "âœ¨ éƒ¨ç½²å®Œæˆï¼"
echo "ğŸ“ è®¿é—®åœ°å€: http://47.237.79.9:4321/reviews/"
```

**ä½¿ç”¨æ–¹æ³•**:
```bash
chmod +x /root/deploy-reviews.sh
/root/deploy-reviews.sh
```

---

## åŠŸèƒ½ç‰¹æ€§

### 1. åˆ†é¡µç³»ç»Ÿ

**ç‰¹ç‚¹**:
- æ¯é¡µæ˜¾ç¤º36æ¡æµ‹è¯„
- æ™ºèƒ½é¡µç æ˜¾ç¤ºï¼ˆæœ€å¤š5ä¸ªé¡µç ï¼‰
- ä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µæŒ‰é’®
- ç‚¹å‡»ç¿»é¡µè‡ªåŠ¨æ»šåŠ¨åˆ°é¡¶éƒ¨
- ç¦ç”¨çŠ¶æ€æç¤º

**ç”¨æˆ·ä½“éªŒ**:
- é¡µç é«˜äº®æ˜¾ç¤ºå½“å‰é¡µ
- æŒ‰é’®hoveræ•ˆæœ
- ç¦ç”¨æŒ‰é’®é€æ˜åº¦é™ä½
- å“åº”å¼å¸ƒå±€

---

### 2. å“åº”å¼è®¾è®¡

**æ–­ç‚¹ç³»ç»Ÿ**:
```css
/* å¤§å±å¹• (PC) */
@media (min-width: 1024px) {
  .grid-auto-fit {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* å¹³æ¿ */
@media (min-width: 768px) and (max-width: 1023px) {
  .grid-auto-fit {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* æ‰‹æœº */
@media (max-width: 767px) {
  .grid-auto-fit {
    grid-template-columns: 1fr;
  }
}
```

---

### 3. åŠ è½½çŠ¶æ€

**åŠ è½½åŠ¨ç”»**:
```tsx
if (loading) {
  return (
    <div className="loading-container">
      <div className="spinner"></div>
      <p>Äang táº£i Ä‘Ã¡nh giÃ¡...</p>
    </div>
  );
}
```

**ç©ºçŠ¶æ€**:
```tsx
if (reviewItems.length === 0) {
  return (
    <div className="empty-state">
      <p>ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡ nÃ o.</p>
    </div>
  );
}
```

---

### 4. SEOä¼˜åŒ–

**Metaæ ‡ç­¾**:
```html
<meta name="title" content="ÄÃ¡nh GiÃ¡ Xe - Vietnam Moto & Auto">
<meta name="description" content="ÄÃ¡nh giÃ¡ chuyÃªn sÃ¢u vá» xe mÃ¡y vÃ  Ã´ tÃ´">
<meta property="og:type" content="website">
<meta property="og:url" content="http://47.237.79.9:4321/reviews/">
<meta property="og:title" content="ÄÃ¡nh GiÃ¡ Xe">
```

**ç»“æ„åŒ–æ•°æ®**:
```json
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "VinFast Klara sau 1 nÄƒm",
  "author": {
    "@type": "Person",
    "name": "BÃ¹i Thá»‹ Linh"
  },
  "datePublished": "2025-10-13"
}
```

---

### 5. æ€§èƒ½ä¼˜åŒ–

**ç­–ç•¥**:
- âœ… é™æ€ç”Ÿæˆåˆ—è¡¨é¡µï¼ˆAstro Staticï¼‰
- âœ… SSRæ¸²æŸ“è¯¦æƒ…é¡µï¼ˆSEOä¼˜åŒ–ï¼‰
- âœ… æŒ‰éœ€åŠ è½½Reactç»„ä»¶ï¼ˆclient:loadï¼‰
- âœ… å›¾ç‰‡æ‡’åŠ è½½
- âœ… CSSä»£ç åˆ†å‰²
- âœ… Gzipå‹ç¼©

**æ€§èƒ½æŒ‡æ ‡**:
- FCP (First Contentful Paint): < 1.5s
- LCP (Largest Contentful Paint): < 2.5s
- TTI (Time to Interactive): < 3.5s

---

## å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼

#### TypeScript

```typescript
// âœ… å¥½çš„å†™æ³•
interface ReviewItem {
  id: number;
  title: string;
  slug: string;
}

async function getReviews(): Promise<ReviewItem[]> {
  const response = await fetch('/api/reviews');
  return response.json();
}

// âŒ é¿å…çš„å†™æ³•
function getReviews() {
  return fetch('/api/reviews').then(res => res.json());
}
```

#### Reactç»„ä»¶

```tsx
// âœ… å¥½çš„å†™æ³•
const ReviewsList: React.FC = () => {
  const [items, setItems] = useState<ReviewItem[]>([]);
  
  useEffect(() => {
    fetchReviews();
  }, []);
  
  return <div>{/* ... */}</div>;
};

// âŒ é¿å…çš„å†™æ³•
function ReviewsList() {
  let items = [];
  fetchReviews().then(data => items = data);
  return <div>{/* ... */}</div>;
}
```

---

### å‘½åè§„èŒƒ

**æ–‡ä»¶å‘½å**:
- ç»„ä»¶: `PascalCase.tsx` (ä¾‹: `ReviewsList.tsx`)
- å·¥å…·å‡½æ•°: `camelCase.ts` (ä¾‹: `reviewsApi.ts`)
- æ ·å¼æ–‡ä»¶: `kebab-case.css` (ä¾‹: `review-card.css`)

**å˜é‡å‘½å**:
- æ™®é€šå˜é‡: `camelCase` (ä¾‹: `reviewItems`)
- å¸¸é‡: `UPPER_SNAKE_CASE` (ä¾‹: `API_BASE_URL`)
- ç»„ä»¶: `PascalCase` (ä¾‹: `ReviewsList`)
- å¸ƒå°”å€¼: `is/has` å‰ç¼€ (ä¾‹: `isLoading`, `hasMore`)

---

### Gitæäº¤è§„èŒƒ

```bash
# åŠŸèƒ½å¼€å‘
git commit -m "feat: æ·»åŠ æµ‹è¯„åˆ—è¡¨åˆ†é¡µåŠŸèƒ½"

# Bugä¿®å¤
git commit -m "fix: ä¿®å¤æµ‹è¯„è¯¦æƒ…é¡µåŠ è½½å¤±è´¥é—®é¢˜"

# æ ·å¼è°ƒæ•´
git commit -m "style: ä¼˜åŒ–æµ‹è¯„å¡ç‰‡hoveræ•ˆæœ"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–°æµ‹è¯„ç³»ç»Ÿå¼€å‘æ–‡æ¡£"

# æ€§èƒ½ä¼˜åŒ–
git commit -m "perf: ä¼˜åŒ–æµ‹è¯„åˆ—è¡¨åŠ è½½æ€§èƒ½"

# é‡æ„ä»£ç 
git commit -m "refactor: é‡æ„æµ‹è¯„APIæœåŠ¡å±‚"
```

---

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. APIè¿æ¥å¤±è´¥

**ç—‡çŠ¶**: 
```
Failed to fetch reviews: Connection refused
```

**åŸå› **: ä»£ç†è®¾ç½®å¹²æ‰°

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä¸´æ—¶è§£å†³
curl --noproxy '*' "http://localhost:4001/api/reviews"

# æ°¸ä¹…è§£å†³ï¼ˆå·²åœ¨systemdé…ç½®ä¸­å®ç°ï¼‰
Environment="http_proxy="
Environment="https_proxy="
```

---

#### 2. åˆ†é¡µä¸å·¥ä½œ

**ç—‡çŠ¶**: ç‚¹å‡»åˆ†é¡µæŒ‰é’®æ²¡æœ‰ååº”

**æ£€æŸ¥æ­¥éª¤**:
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
2. æŸ¥çœ‹Consoleæ˜¯å¦æœ‰é”™è¯¯
3. æ£€æŸ¥Networkè¯·æ±‚æ˜¯å¦å‘é€

**å¸¸è§åŸå› **:
- `currentPage`çŠ¶æ€æœªæ›´æ–°
- APIè¯·æ±‚å¤±è´¥
- åˆ†é¡µå‚æ•°æœªæ­£ç¡®ä¼ é€’

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// ç¡®ä¿æ­£ç¡®æ›´æ–°çŠ¶æ€
const handlePageChange = (page: number) => {
  setCurrentPage(page); // è§¦å‘useEffecté‡æ–°è¯·æ±‚
  window.scrollTo({ top: 0, behavior: 'smooth' });
};
```

---

#### 3. è¯¦æƒ…é¡µ404

**ç—‡çŠ¶**: è®¿é—®æµ‹è¯„è¯¦æƒ…é¡µè¿”å›404

**åŸå› **: 
- Slugä¸å­˜åœ¨
- APIè·¯ç”±é…ç½®é”™è¯¯
- SSRè·¯å¾„ç”Ÿæˆå¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥APIæ˜¯å¦æ­£å¸¸
curl --noproxy '*' "http://localhost:4001/api/reviews/slug/test-slug"

# 2. æ£€æŸ¥å‰ç«¯è·¯ç”±
ls /var/www/vietnam-moto-auto/frontend/dist/server/

# 3. é‡æ–°ç”Ÿæˆé™æ€è·¯å¾„
cd /root/è¶Šå—æ‘©æ‰˜æ±½è½¦ç½‘ç«™/frontend
npm run build
```

---

#### 4. CORSé”™è¯¯

**ç—‡çŠ¶**: 
```
Access to fetch at 'http://47.237.79.9:4001/api/reviews' has been blocked by CORS policy
```

**è§£å†³æ–¹æ¡ˆ**:

æ£€æŸ¥åç«¯CORSé…ç½®:
```typescript
// backend/src/index.ts
const allowedOrigins = [
  'http://localhost:4321',
  'http://47.237.79.9:4321',
  'http://127.0.0.1:4321'
];

app.use(cors({
  origin: (origin, callback) => {
    if (!origin || allowedOrigins.indexOf(origin) !== -1) {
      callback(null, true);
    } else {
      callback(new Error('Not allowed by CORS'));
    }
  },
  credentials: true,
}));
```

---

#### 5. æœåŠ¡æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**:
```bash
systemctl status vietnam-moto-backend
â— vietnam-moto-backend.service - failed
```

**æ£€æŸ¥æ­¥éª¤**:
```bash
# 1. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
journalctl -u vietnam-moto-backend -n 50

# 2. æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 4001

# 3. æ‰‹åŠ¨å¯åŠ¨æµ‹è¯•
cd /var/www/vietnam-moto-auto/backend
node dist/index.js
```

**å¸¸è§åŸå› **:
- ç«¯å£è¢«å ç”¨
- æ•°æ®åº“è¿æ¥å¤±è´¥
- ç¯å¢ƒå˜é‡ç¼ºå¤±
- ä»£ç ç¼–è¯‘é”™è¯¯

---

#### 6. æ ·å¼ä¸ç”Ÿæ•ˆ

**ç—‡çŠ¶**: æµ‹è¯„å¡ç‰‡æ²¡æœ‰æ ·å¼

**æ£€æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥CSSæ–‡ä»¶æ˜¯å¦æ­£ç¡®å¼•å…¥
2. æ£€æŸ¥CSSå˜é‡æ˜¯å¦å®šä¹‰
3. æ£€æŸ¥ç±»åæ˜¯å¦æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**:
```tsx
// ç¡®ä¿å¼•å…¥CSS
import './ContentCard.css';
import './SectionStyles.css';

// æ£€æŸ¥ç±»å
<div className="card-glass"> {/* ä¸æ˜¯ class */}
```

---

### è°ƒè¯•æŠ€å·§

#### å‰ç«¯è°ƒè¯•

```typescript
// 1. æ·»åŠ console.log
console.log('APIå“åº”:', response);
console.log('å½“å‰é¡µç :', currentPage);

// 2. ä½¿ç”¨React DevTools
// å®‰è£…æµè§ˆå™¨æ‰©å±•ï¼ŒæŸ¥çœ‹ç»„ä»¶çŠ¶æ€

// 3. ä½¿ç”¨Networké¢æ¿
// æŸ¥çœ‹APIè¯·æ±‚å’Œå“åº”
```

#### åç«¯è°ƒè¯•

```typescript
// 1. æ·»åŠ æ—¥å¿—
console.log('[Reviews API] Query params:', req.query);
console.log('[Reviews API] Result count:', count);

// 2. ä½¿ç”¨curlæµ‹è¯•
curl --noproxy '*' -v "http://localhost:4001/api/reviews"

// 3. æŸ¥çœ‹æ•°æ®åº“
sqlite3 /var/www/vietnam-moto-auto/backend/vietnam-moto-auto.db
SELECT * FROM news WHERE status='published' LIMIT 5;
```

---

### æ€§èƒ½ç›‘æ§

#### å‰ç«¯æ€§èƒ½

```javascript
// ä½¿ç”¨Performance API
const start = performance.now();
await fetchReviews();
const end = performance.now();
console.log(`åŠ è½½æ—¶é—´: ${end - start}ms`);
```

#### åç«¯æ€§èƒ½

```typescript
// æ·»åŠ å“åº”æ—¶é—´ä¸­é—´ä»¶
app.use((req, res, next) => {
  const start = Date.now();
  res.on('finish', () => {
    const duration = Date.now() - start;
    console.log(`${req.method} ${req.path} - ${duration}ms`);
  });
  next();
});
```

---

## æœªæ¥è§„åˆ’

### çŸ­æœŸè®¡åˆ’ï¼ˆ1-3ä¸ªæœˆï¼‰

- [ ] æ·»åŠ æµ‹è¯„æœç´¢åŠŸèƒ½
- [ ] å®ç°æµ‹è¯„æ”¶è—åŠŸèƒ½
- [ ] æ·»åŠ è¯„è®ºç³»ç»Ÿ
- [ ] æ”¯æŒæµ‹è¯„è¯„åˆ†
- [ ] ç§»åŠ¨ç«¯ä¼˜åŒ–

### ä¸­æœŸè®¡åˆ’ï¼ˆ3-6ä¸ªæœˆï¼‰

- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] è§†é¢‘æµ‹è¯„æ”¯æŒ
- [ ] AIè‡ªåŠ¨æ‘˜è¦ç”Ÿæˆ
- [ ] ç›¸å…³è½¦å‹æ¨è
- [ ] ç¤¾äº¤åˆ†äº«ä¼˜åŒ–

### é•¿æœŸè®¡åˆ’ï¼ˆ6-12ä¸ªæœˆï¼‰

- [ ] ç”¨æˆ·æŠ•ç¨¿ç³»ç»Ÿ
- [ ] ä¸“ä¸šç¼–è¾‘åå°
- [ ] æµ‹è¯„å¯¹æ¯”å·¥å…·
- [ ] æ•°æ®åˆ†æDashboard
- [ ] ç§»åŠ¨Appå¼€å‘

---

## é™„å½•

### A. å¸¸ç”¨å‘½ä»¤

```bash
# æœåŠ¡ç®¡ç†
systemctl start vietnam-moto-backend
systemctl stop vietnam-moto-backend
systemctl restart vietnam-moto-backend
systemctl status vietnam-moto-backend

# æŸ¥çœ‹æ—¥å¿—
journalctl -u vietnam-moto-backend -f
journalctl -u vietnam-moto-frontend -f

# æµ‹è¯•API
curl --noproxy '*' "http://localhost:4001/api/reviews?limit=5"

# ç¼–è¯‘é¡¹ç›®
cd /root/è¶Šå—æ‘©æ‰˜æ±½è½¦ç½‘ç«™/frontend && npm run build
cd /root/è¶Šå—æ‘©æ‰˜æ±½è½¦ç½‘ç«™/backend && npm run build

# éƒ¨ç½²
/root/deploy-reviews.sh
```

---

### B. ç›¸å…³æ–‡æ¡£

- [APIè·¯ç”±å¼€å‘æ–‡æ¡£](./APIè·¯ç”±å¼€å‘æ–‡æ¡£.md)
- [é—®ç­”ç³»ç»Ÿå¼€å‘æ–‡æ¡£](./é—®ç­”ç³»ç»Ÿå¼€å‘æ–‡æ¡£.md)
- [äºŒæ‰‹äº¤æ˜“å¼€å‘æ–‡æ¡£](./äºŒæ‰‹äº¤æ˜“å¼€å‘æ–‡æ¡£.md)
- [éƒ¨ç½²æ–‡æ¡£](../DEPLOY.md)

---

### C. è”ç³»æ–¹å¼

- **æŠ€æœ¯æ”¯æŒ**: é¡¹ç›®ç»´æŠ¤å›¢é˜Ÿ
- **é—®é¢˜åé¦ˆ**: GitHub Issues
- **æ–‡æ¡£ç»´æŠ¤**: AI Assistant

---

## æ›´æ–°æ—¥å¿—

### v1.1 (2025-10-14)
- ğŸ”§ ä¿®å¤ReviewSchedulerè°ƒåº¦å™¨é—®é¢˜
- âœ… é—®é¢˜: è°ƒåº¦å™¨åœæ­¢å·¥ä½œ8å°æ—¶ï¼ˆSystemdç”¨æˆ·é…ç½®é”™è¯¯ï¼‰
- âœ… åŸå› : User=www-data (ç”¨æˆ·ä¸å­˜åœ¨) â†’ é”™è¯¯ä»£ç 217/USER
- âœ… ä¿®å¤: æ›´æ”¹ä¸ºUser=rootï¼Œæ›´æ–°systemdé…ç½®
- âœ… ç»“æœ: è°ƒåº¦å™¨æ¢å¤æ­£å¸¸ï¼Œæ¯40åˆ†é’Ÿç”Ÿæˆä¸€æ¡æµ‹è¯„
- âœ… éªŒè¯: æˆåŠŸç”Ÿæˆæ–°æµ‹è¯„(ID: 92)

### v1.0 (2025-10-14)
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®ç°æµ‹è¯„åˆ—è¡¨å’Œè¯¦æƒ…é¡µ
- âœ… å®Œæˆåˆ†é¡µåŠŸèƒ½ï¼ˆæ¯é¡µ36æ¡ï¼‰
- âœ… å“åº”å¼è®¾è®¡
- âœ… APIæ¥å£å®Œæ•´å®ç°
- âœ… éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

---

## æ•…éšœæ’é™¤ - æœ€æ–°æ¡ˆä¾‹

### è°ƒåº¦å™¨åœæ­¢å·¥ä½œé—®é¢˜ (2025-10-14)

**é—®é¢˜æè¿°**:
- ReviewScheduleråœæ­¢ç”Ÿæˆæµ‹è¯„è¶…è¿‡8å°æ—¶
- æœ€åç”Ÿæˆæ—¶é—´: 09:43 (ID: 91)
- å‘ç°æ—¶é—´: 17:58

**è¯Šæ–­æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status vietnam-moto-backend
# æ˜¾ç¤º: active (running) ä½†æ— æ—¥å¿—è¾“å‡º âš ï¸

# 2. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
sudo journalctl -u vietnam-moto-backend -n 100
# å‘ç°: status=217/USER, Failed with result 'exit-code'

# 3. æ£€æŸ¥é…ç½®
cat /etc/systemd/system/vietnam-moto-backend.service | grep User
# å‘ç°: User=www-data (ç”¨æˆ·ä¸å­˜åœ¨)
```

**æ ¹æœ¬åŸå› **:
- Systemdé…ç½®æŒ‡å®šUser=www-data
- è¯¥ç”¨æˆ·åœ¨ç³»ç»Ÿä¸­ä¸å­˜åœ¨
- å¯¼è‡´æœåŠ¡æ— æ³•å¯åŠ¨ï¼ˆé”™è¯¯ä»£ç 217/USERï¼‰
- æœåŠ¡å¤„äº"å‡è¿è¡Œ"çŠ¶æ€ï¼ˆä¸æ–­é‡å¯å¤±è´¥ï¼‰

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. ä¿®æ”¹é…ç½®æ–‡ä»¶
# å°† User=www-data æ”¹ä¸º User=root
# å°† Group=www-data æ”¹ä¸º Group=root

# 2. æ›´æ–°é…ç½®
sudo cp systemd/vietnam-moto-backend.service /etc/systemd/system/
sudo systemctl daemon-reload

# 3. é‡å¯æœåŠ¡
sudo systemctl restart vietnam-moto-backend

# 4. éªŒè¯
sudo journalctl -u vietnam-moto-backend -n 50 --no-pager
# åº”è¯¥çœ‹åˆ°: ğŸš€ å¯åŠ¨ç”¨æˆ·æµ‹è¯„ç”Ÿæˆè°ƒåº¦å™¨...
```

**é¢„é˜²æªæ–½**:
1. éƒ¨ç½²å‰éªŒè¯systemdé…ç½®ä¸­çš„ç”¨æˆ·æ˜¯å¦å­˜åœ¨
2. å®šæœŸæ£€æŸ¥æœåŠ¡æ—¥å¿—ï¼Œç¡®ä¿æœ‰æ­£å¸¸è¾“å‡º
3. ç›‘æ§æœ€æ–°æµ‹è¯„ç”Ÿæˆæ—¶é—´ï¼Œè¶…è¿‡1å°æ—¶å‘Šè­¦
4. ä½¿ç”¨å¥åº·æ£€æŸ¥è„šæœ¬å®šæœŸéªŒè¯

**ç›¸å…³å‘½ä»¤**:
```bash
# æ£€æŸ¥æœ€æ–°æµ‹è¯„
sqlite3 /var/www/vietnam-moto-auto/backend/database/vietnam_moto_auto.sqlite \
  "SELECT id, title, created_at FROM news ORDER BY created_at DESC LIMIT 3;"

# ç›‘æ§å®æ—¶æ—¥å¿—
sudo journalctl -u vietnam-moto-backend -f | grep "æµ‹è¯„"
```

---

**æ–‡æ¡£ç»“æŸ**

æœ€åæ›´æ–°: 2025-10-14 18:10  
ç‰ˆæœ¬: v1.1  
çŠ¶æ€: âœ… å·²æ›´æ–°

